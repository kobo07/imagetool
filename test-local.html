<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æœ¬åœ°æ–‡ä»¶æµ‹è¯•</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .result {
            background: white;
            padding: 20px;
            margin: 10px 0;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .success { border-left: 4px solid #10b981; }
        .error { border-left: 4px solid #ef4444; }
        button {
            background: #6366f1;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
        }
        button:hover { background: #4f46e5; }
        pre {
            background: #f1f5f9;
            padding: 10px;
            border-radius: 4px;
            overflow-x: auto;
        }
    </style>
</head>
<body>
    <h1>ğŸ§ª æœ¬åœ°æ–‡ä»¶å¿«é€Ÿæµ‹è¯•</h1>
    <p>æµ‹è¯• libs ç›®å½•ä¸­çš„ FFmpeg æ–‡ä»¶æ˜¯å¦å¯ä»¥æ­£å¸¸è®¿é—®</p>
    
    <button onclick="testFiles()">å¼€å§‹æµ‹è¯•</button>
    
    <div id="results"></div>
    
    <script>
        async function testFiles() {
            const resultsDiv = document.getElementById('results');
            resultsDiv.innerHTML = '<div class="result">æ­£åœ¨æµ‹è¯•...</div>';
            
            const files = [
                { name: 'ffmpeg.js', path: './libs/ffmpeg.js' },
                { name: 'ffmpeg-core.js', path: './libs/ffmpeg-core.js' },
                { name: 'ffmpeg-core.wasm', path: './libs/ffmpeg-core.wasm' },
                { name: 'ffmpeg-core.worker.js', path: './libs/ffmpeg-core.worker.js' }
            ];
            
            let html = '';
            let allSuccess = true;
            
            for (const file of files) {
                try {
                    const response = await fetch(file.path);
                    if (response.ok) {
                        const blob = await response.blob();
                        const sizeKB = (blob.size / 1024).toFixed(2);
                        const sizeMB = (blob.size / 1024 / 1024).toFixed(2);
                        const sizeStr = blob.size > 1024 * 1024 ? `${sizeMB} MB` : `${sizeKB} KB`;
                        
                        html += `
                            <div class="result success">
                                <strong>âœ… ${file.name}</strong><br>
                                å¤§å°: ${sizeStr}<br>
                                è·¯å¾„: ${file.path}
                            </div>
                        `;
                    } else {
                        allSuccess = false;
                        html += `
                            <div class="result error">
                                <strong>âŒ ${file.name}</strong><br>
                                é”™è¯¯: HTTP ${response.status}<br>
                                è·¯å¾„: ${file.path}
                            </div>
                        `;
                    }
                } catch (error) {
                    allSuccess = false;
                    html += `
                        <div class="result error">
                            <strong>âŒ ${file.name}</strong><br>
                            é”™è¯¯: ${error.message}<br>
                            è·¯å¾„: ${file.path}
                        </div>
                    `;
                }
            }
            
            if (allSuccess) {
                html += `
                    <div class="result success">
                        <h3>ğŸ‰ æ‰€æœ‰æ–‡ä»¶æµ‹è¯•é€šè¿‡ï¼</h3>
                        <p>ç°åœ¨å¯ä»¥æ­£å¸¸ä½¿ç”¨è§†é¢‘å¤„ç†åŠŸèƒ½äº†ã€‚</p>
                        <p><a href="video.html">æ‰“å¼€è§†é¢‘å¤„ç†é¡µé¢ â†’</a></p>
                    </div>
                `;
            } else {
                html += `
                    <div class="result error">
                        <h3>âš ï¸ éƒ¨åˆ†æ–‡ä»¶ç¼ºå¤±æˆ–æ— æ³•è®¿é—®</h3>
                        <p>è¯·ç¡®ä¿å·²è¿è¡Œä¸‹è½½è„šæœ¬ï¼š</p>
                        <pre>powershell -ExecutionPolicy Bypass -File download-ffmpeg.ps1</pre>
                        <p>æˆ–æ‰‹åŠ¨ä¸‹è½½æ–‡ä»¶åˆ° libs ç›®å½•ã€‚</p>
                    </div>
                `;
            }
            
            resultsDiv.innerHTML = html;
        }
        
        // è‡ªåŠ¨è¿è¡Œæµ‹è¯•
        window.onload = () => {
            setTimeout(testFiles, 500);
        };
    </script>
</body>
</html>
